package accounthist

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestActionKey(t *testing.T) {
	key1Bytes := make([]byte, actionKeyLen)

	encodeActionKey(key1Bytes, "mama", 1, uint64(1))
	assert.Equal(t,
		[]byte{
			0x2,
			0x0, 0x0, 0x0, 0x0, 0x0, 0x60, 0xa4, 0x91,
			0xfe,
			0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe,
		},
		key1Bytes,
	)

	encodeActionKey(key1Bytes, "b1", 2, uint64(256))
	assert.Equal(t,
		[]byte{
			0x2,
			0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x40, 0x38,
			0xfd,
			0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xff,
		},
		key1Bytes,
	)
}
